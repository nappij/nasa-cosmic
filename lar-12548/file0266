         INFORMATION OUTPUT BY THE PARSER GENERATOR  (7/5/78) 


  THE PARSER GENERATOR OUTPUTS TO THE FOLLOWING FILES%  

OUTPUT%HUMAN-ORIENTED INFORMATION GENERATED DURING THE PROCESS
 OF PARSER GENERATION. THIS LARGELY SELF-EXPLANATORY LISTING
 CONSISTS OF
 1. A CROSS-REFERENCE TABLE FOR THE SYMBOLS OF THE GRAMMAR BEING
    PROCESSED.
 2. THE SYMBOLS OF THE GRAMMAR, TOGETHER WITH THEIR SNO'S AND AN
    INDICATION WHETHER THE SYMBOL IS TERMINAL OR NONTERMINAL. 
    A SYMBOL'S SNO IS AN (INTEGER) CODE NUMBER ASSIGNED TO
    THE SYMBOL BY THE PARSER GENERATOR AND USED TO REPRESENT
    THE SYMBOL INTERNALLY. FOR TERMINALS THE SYMBOL'S SNO IS
    IDENTICAL TO THE TOKEN THE SCANNER (THE SKELETON OF WHICH IS
    GENERATED AUTOMATICALLY; SEE BELOW) RETURNS  TO THE PARSER
    UPON ENCOUNTERING THAT SYMBOL.
 3. THE FOLLOWS TABLE FOR THE GRAMMAR.
 4. THE PRODUCTIONS OF THE GRAMMAR, TOGETHER WITH THE INTERNAL
    (AGAIN AUTOMATICALLY GENERATED) CODE NUMBER OF THE
    PRODUCTION. NOTE THAT PRODUCTIONS ARE NUMBERED IN THE 
    ORDER READ, STARTING AT 1.
 5. A LISTING OF THE PARSER STATES, WITH CONFLICTS FLAGGED. 
    NOTE THAT WHILE ROUTINE ERC COMPUTES THE LALR LOOKAHEADS IN THOSE 
    CASES WHERE AN SLR CONFLICT WHICH CAN BE DISAMBIGUATED WITH LALR
    LOOKAHEAD OCCURS, THIS LOOKAHEAD IS NOT CURRENTLY REPRESENTED IN
    THE GENERATED PARSE TABLES. WE ARE WORKING ON THIS PROBLEM; 
    USER INTERVENTION, HOWEVER, IS NECESSARY AT PRESENT TO FILL IN
    THE TABLE ENTRIES CONCERNED.
 6. OPTIONALLY, A PRINTOUT OF THE PARSE TABLE GENERATED.

TABS% FILE OF ARRAY[0..99] OF INTEGER;

TABS CONTAINS THE GENERATED PARSE TABLES. TO SIMPLIFY THE 
INTERFACE BETWEEN OUR PARSER GENERATOR AND OTHERE SYSTEMS, WE HAVE MODIFIED 
THE TABLE-WRITING ROUTINE OUTSTATES OF OR PROGRAM TO OUTPUT UNCOMPRESSED TABLES,
ENCODED AS FOLLOWS% 


 (STATE_NUMBER (SYMBOL ACTION)*  -2  (REDUCTION_NUMBER (SYMBOL)+ )*  -1)+   -3
  WHERE  (  )*  AND (  )+ ARE THE USUAL REGULAR EXPRESSION NOTATIONS
  DENOTING 0 OR MORE OR 1 OR MORE REPETITIONS, RESPECTIVELY, OF THE 
  CONSTRUCTS ENCLOSED IN PARENTHESES. 
    THE TABLE ENTRIES ARE ENCODED AS FOLLOWS% 
                                    SYMBOLS% THE SNO OF THE SYMBOL
                              STATE NUMBERS% 1*8192+STATE_NUMBER
                              SHIFT ACTIONS% 2*8191+NO. OF GOTO STATE 
                       SHIFT-REDUCE ACTIONS% 3*8192+PRODUCTION NUMBER 
                               GOTO ACTIONS% 4*8192+GOTO_STATE
      PRODUCTION NUMBERS (FOR REDUCE ITEMS)% 5*8192+PRODUCTION NUMBER 

  NOTE THAT TABLE DELIMITERS ARE REPRESENTED BY NEGATIVE NUMBERS, 
 THAT THE CLASS OF EACH NON-NEGATIVE ENTRY IS OBTAINED BY COMPUTING 
 ENTRY DIV 8192, AND THE IDENTITY OF THE ENCODED ENTITY BY COMPUTING
 ENTRY MOD 8192. MORE DETAIL MAY BE OBTAINED BY EXAMINING THE 
 FOLLOWING PARAPHRASE OF THE TABLE-EMITTING PROCEDURE, AND FROM 
 OUTSTATES ITSELF. NOTE ALSO THAT THE ACTION AND GOTO ENTRIES IN
 THE TABLE ARE EASILY DISTINGUISHED% IF THE ACTION CODE DIV 8192
 IS 2 OR 3, THE ACTION IS "SHIFT NEWSTATE" OR "SR NEWSTATE", AND
 THE SYMBOL MUST BE TERMINAL; IF 4, WE HAVE A GOTO ENTRY AND THE
 SYMBOL IS NONTERMINAL. CLEARLY ALL SYMBOL ENTRIES FOR REDUCE ITEMS 
 (I.E. BEYOND THE -2 MARK) ARE TERMINAL, SINCE THEY REFER TO THE
 HEAD OF THE INPUT STREAM.

      PARAPHRASE OF PROCEDURE OUTSTATES 

 FOR ALL STATES S DO
 BEGIN
  EMIT(1*8192 + STATE_NUMBER);
  FOR ALL ITEMS I IN STATE S DO 
  BEGIN 
   IF ITEM I HAS NOT YET BEEN MARKED 'USED' THEN
   BEGIN
    IF I HAS A SYMBOL TO THE RIGHT OF THE '.' MARKER THEN 
    I IS NOT A REDUCE ITEM, SO
    BEGIN 
     EMIT (SNO OF SYMBOL);
     IF I IS A SHIFT-REDUCE ITEM THEN 
     EMIT (3*8192 + PRODUCTION NUMBER)
     ELSE IT IS A SHIFT OR A GOTO.    
     IF IT IS A SHIFT (I.E. IF SYMBOL IS TERMINAL)
     THEN EMIT(2*8192 + GOTO STATE) 
     ELSE IT IS A NONTERMINAL, SO 
     EMIT(4*8192 + GOTO STATE); 
     MARK ALL ITEMS IN STATE S HAVING THE SAME SYMBOL AS THE CURRENT
     ITEM FOLLOWING THE MARKER 'USED'.
    END;
   END; 

   EMIT(-2) TO INDICATE BEGINNING OF REDUCE ENTRIES. (-2 IS EMITTED 
   EVEN IF THE NUMBER OF REDUCE ENTRIES IS 0).
   FOR ALL ITEMS I IN STATE S DO
    IF I IS A REDUCE ITEM THEN
    BEGIN 
     EMIT (5*8192 + PRODUCTION NUMBER); 
     FOR ALL TERMINALS T THAT CAN LEGALLY FOLLOW THE
     LEFT-HAND SIDE OF THE PRODUCTION CORRESPONDING TO
     ITEM I DO EMIT(SNO OF T);. 
    END;
   EMIT(-1); (-1 INDICATES THE END OF THE STATE TABLE ROW FOR 
   THE CURRENT STATE S) 
   END OF LOOP THROUGH STATES;
  EMIT(-3) TO DENOTE THE END OF THE TABLE;
 END OF PROCEDURE OUTSTATES.


 PDATA% A TEXT FILE WHICH HAS BEEN WRITTEN BY A LOOP EQUIVALENT TO
    FOR I%=1 TO NUMBER_OF_PRODUCTIONS DO
     WRITE(PDATA,SNO_OF_LEFT_HAND_SIDE,LENGTH_OF_RIGHT_HAND_SIDE);
 THIS INFORMATION IS OF OBVIOUS UTILITY TO THE PARSER DRIVEN BY 
  THE GENERATED STATE TABLE.

 SCANINFO% A TEXT FILE TO WHICH THE PARSER GENERATOR WRITES SKELETON
 PASCAL ROUTINES TO BE FILLED IN BY THE USER. THIS INFORMATION
 INCLUDES 
 1. AN INITIALIZATION ROUTINE SCANINIT
 2. A SCANNER SKELETON NEXTSYM. THIS ROUTINE CONTAINS A CASE
    STATEMENT WITH AUTOMATICALLY GENERATED CASE ENTRIES TO PROCESS
    SPECIAL SYMBOLS (DEFINED TO BE ANY SYMBOL CONSISTING OF ONE OR MORE 
    CHARACTERS, AT LEAST ONE OF WHICH IS NOT ALPHABETIC). THE 
    REMAINING CASES, I.E. THE HANDLERS FOR COMMENTS, STRINGS,NUMBERS, 
    KEYWORDS AND IDENTIFIERS MUST BE SUPPLIED BY THE USER.
 3. THE REMAINING FILES USED BY THE PROGRAM ARE NOT RELEVANT TO 
    THE APPLICATION IN QUESTION.


 PARSER GENERATOR OPTIONS%  
 VARIABLE ENABLED IS DEFINED AS A SET OF TOGGLES, WHERE TOGGLES IS
  THE ENUMERATED TYPE (SEMANTICS,GENSHIFTRED,PRINT_TABS). 
 ENABLED IS INITIALIZED IN THE MAIN PROGRAM AND TESTED IN VARIOUS 
 PROCEDURES.
 IF GENSHIFTRED IS ENABLED, THEN SHIFT-REDUCE (SR) ITEMS ARE
 GENERATED. SR ITEMS COMBINE SHIFTING AND REDUCTION ACTIONS, AND
 ARE GENERATED UNDER THE CIRCUMSTANCES ILLUSTRATED BY THE 
 FOLLOWING EXAMPLE% 
     SUPPOSE THE STATE S  
         A%%=B.C
         Q%%=RS.T 
         T%%=.BC
         T%%=.
     HAS BEEN GENERATED. THEN GOTO(S,C) IS THE STATE
         A%%=BC.
     AND GOTO(S,T) IS THE STATE 
         Q%%=RST. 
     RATHER THAN GENERATING SUCH STATES WHICH WILL CONTAIN ONLY A SINGLE
 ITEM, AND THIS ITEM A REDUCTION ITEM, THE PARSE TABLE ACTION FOR 
 STATE S, SYMBOL C IS SET TO 'SHIFT & REDUCE BY A%%=BC', AND THE
 STATE S, SYMBOL T ENTRY TO 'SHIFT & REDUCE BY Q. SR'S
 ARE GENERATED ONLY IF GENSHIFTRED IS IN ENABLED; IF NOT, THE 
 SINGLE-REDUCE-ITEM STATES ARE GENERATED EXPLICITLY.

 IF PRINT_TABS IS IN ENABLED, A HUMAN-READABLE FORM OF THE PARSE
 TABLE IS WRITTEN TO FILE OUTPUT. 


*********THE PARSER GENERATOR IS IN FILE HOSTBGN ON CLUSTER 1******** 
*********AND IN SFTBLGN ON CLUSTER 2 ******************************** 

